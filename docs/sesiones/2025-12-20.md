# Sesión 2025-12-20: Eliminación de Credenciales Hardcodeadas

## Objetivo
Eliminar todas las credenciales hardcodeadas del repositorio después de alerta de GitGuardian.

## Contexto
GitGuardian detectó "Company Email Password exposed on GitHub" en el repositorio. Aunque eran credenciales de ejemplo/desarrollo (no secretos reales), se decidió limpiar todo el código para evitar futuras alertas.

## Implementaciones

### 1. Sistema de Credenciales por Variables de Entorno

**Archivo creado**: `storage/keys/DEV_CREDENTIALS.md`
- Contiene todas las credenciales de desarrollo
- Directorio agregado a `.gitignore` para nunca subirlo a Git

**Variables de entorno agregadas a `.env.example`**:
```bash
# Usuario administrador ROOT
ADMIN_EMAIL=admin@ficem.org
ADMIN_PASSWORD=<tu_password_seguro>

# Auto-login en desarrollo (admin_app.py)
DEV_ADMIN_EMAIL=admin@ficem.org
DEV_ADMIN_PASSWORD=<tu_password_seguro>

# Usuarios de ejemplo
COORD_PERU_PASSWORD=<password>
COORD_COLOMBIA_PASSWORD=<password>
ADMIN_PROCESO_PASSWORD=<password>
```

### 2. Scripts Actualizados

**`scripts/crear_usuario_admin.py`**:
- Lee `ADMIN_EMAIL` y `ADMIN_PASSWORD` de variables de entorno
- Lee credenciales de usuarios de ejemplo de variables de entorno
- Muestra error si las variables no están configuradas

**`scripts/init_db.py`**:
- Lee todas las credenciales de variables de entorno
- Valida que estén configuradas antes de crear usuarios

**`admin_app.py`**:
- Auto-login usa `DEV_ADMIN_EMAIL` y `DEV_ADMIN_PASSWORD` de `.env`
- Ya no tiene credenciales hardcodeadas

### 3. Documentación Actualizada

**Archivos limpiados** (credenciales reemplazadas por placeholders):
- `QUICKSTART.md` - Referencias a `.env` en lugar de passwords
- `README.md` - Referencia a `.env.example`
- `docs/sesiones/2025-12-17.md` - Referencia a `storage/keys/DEV_CREDENTIALS.md`
- `docs/IMPLEMENTACION_MOTOR_PROCESOS.md` - Placeholders `<EMAIL>`, `<PASSWORD>`

**`CLAUDE.md`** - Agregada sección:
```markdown
### Credenciales de Desarrollo
- **Ubicación**: `storage/keys/DEV_CREDENTIALS.md`
- **IMPORTANTE**: Este directorio está en `.gitignore`
- Para desarrollo local, copiar credenciales a tu `.env`
```

### 4. .gitignore Actualizado

```gitignore
# Credenciales de desarrollo (nunca subir)
storage/keys/
```

## Archivos Modificados

| Archivo | Cambio |
|---------|--------|
| `storage/keys/DEV_CREDENTIALS.md` | Creado - credenciales de desarrollo |
| `.gitignore` | Agregado `storage/keys/` |
| `.env.example` | Agregadas variables de credenciales |
| `CLAUDE.md` | Sección de credenciales |
| `admin_app.py` | Lee credenciales de `.env` |
| `scripts/crear_usuario_admin.py` | Lee credenciales de `.env` |
| `scripts/init_db.py` | Lee credenciales de `.env` |
| `QUICKSTART.md` | Placeholders en lugar de passwords |
| `README.md` | Referencia a `.env.example` |
| `docs/sesiones/2025-12-17.md` | Referencia a archivo de credenciales |
| `docs/IMPLEMENTACION_MOTOR_PROCESOS.md` | Placeholders |

## Resultado

- No hay credenciales hardcodeadas en código que se suba a Git
- Credenciales de desarrollo documentadas en archivo ignorado por Git
- Scripts validan que las variables de entorno estén configuradas
- GitGuardian no debería generar más alertas

---

**Participantes**: Carlos Pinilla (usuario), Claude (asistente)
**Estado**: Completado